# Тест-кейсы для выпадающего списка страны и кода телефона 

---

## TC-01: Полный список и сортировка  
**Предусловие:**  
- Страница с компонентом dropdown открыта, список стран загружен.

**Шаги и ожидаемые результаты:**  
1. Открыть dropdown  
   **Ожидаемый результат:** Список отображается полностью, во включены флаги и коды.  
2. Проверить первую и последнюю запись  
   **Ожидаемый результат:** Первая и последняя страны отображаются корректно: соответствующий код и флаг.  
3. Закрыть dropdown (Esc или клик вне)  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-02: Уникальность кодов  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Просмотреть все коды  
   **Ожидаемый результат:** Повторяющихся кодов не обнаружено.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-03: Фильтрация по названию ("Ru")  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести `Ru`  
   **Ожидаемый результат:** Список фильтруется.  
2. Проверить результат  
   **Ожидаемый результат:** Отображается только «Россия».  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт, поле поиска очищено.

---

## TC-04: Фильтрация по коду ("+1")  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести `+1`  
   **Ожидаемый результат:** Список фильтруется.  
2. Проверить результат  
   **Ожидаемый результат:** Показаны все страны с кодом +1.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт, поле очищено.

---

## TC-05: Нет совпадений ("XYZ")  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести `XYZ`  
   **Ожидаемый результат:** Появляется сообщение «Ничего не найдено».  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт, поле очищено.

---

## TC-06: Спецсимволы ("!@#")  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести `!@#`  
   **Ожидаемый результат:** Появляется сообщение «Ничего не найдено».  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт, поле очищено.

---

## TC-07: Выбор мышью  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Кликнуть по третьему элементу  
   **Ожидаемый результат:** В поле отображается выбранная страна и код.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-08: Выбор клавиатурой  
**Предусловие:**  
- Dropdown доступен.

**Шаги и ожидаемые результаты:**  
1. Нажать Tab  
   **Ожидаемый результат:** Фокус установлен на dropdown.  
2. Нажать стрелку вниз 3 раза  
   **Ожидаемый результат:** Подсвечен 4-й элемент.  
3. Нажать Enter  
   **Ожидаемый результат:** В поле демо отображается выбранный элемент.  
4. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-09: Закрытие без выбора  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Нажать Esc  
   **Ожидаемый результат:** Dropdown закрыт, значение не изменилось.  
2. Открыть dropdown и кликнуть вне  
   **Ожидаемый результат:** Dropdown снова закрыт.

---

## TC-10: Сохранение после перезагрузки  
**Предусловие:**  
- Dropdown доступен.

**Шаги и ожидаемые результаты:**  
1. Выбрать любую страну  
   **Ожидаемый результат:** Поле заполнено выбранным значением.  
2. Перезагрузить страницу  
   **Ожидаемый результат:** Выбранная страна сохраняется.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-11: Сброс кнопкой  
**Предусловие:**  
- Страна выбрана.

**Шаги и ожидаемые результаты:**  
1. Нажать кнопку «Сброс»  
   **Ожидаемый результат:** Поле очищено или возвращено к дефолту.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-12: ARIA-атрибуты  
**Предусловие:**  
- Dropdown доступен.

**Шаги и ожидаемые результаты:**  
1. Проверить aria-haspopup  
   **Ожидаемый результат:** aria-haspopup="listbox".  
2. Открыть dropdown  
   **Ожидаемый результат:** aria-expanded="true".  
3. Закрыть dropdown  
   **Ожидаемый результат:** aria-expanded="false", dropdown закрыт.

---

## TC-13: Масштабирование и адаптивность  
**Предусловие:**  
- Страница загружена.

**Шаги и ожидаемые результаты:**  
1. Установить масштаб 200%  
   **Ожидаемый результат:** Dropdown читаем и доступен.  
2. Уменьшить ширину экрана до 360px  
   **Ожидаемый результат:** Элементы не обрезаются, читаемы.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-14: Локализация и RTL  
**Предусловие:**  
- Интерфейс на en.

**Шаги и ожидаемые результаты:**  
1. Переключить на arabic (ar)  
   **Ожидаемый результат:** Список выровнен справа, арабская сортировка.  
2. Переключить на español (es-ES)  
   **Ожидаемый результат:** Названия отображаются на испанском.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-15: Debounce  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести символ  
   **Ожидаемый результат:** Запрос к API выполняется спустя 300 мс после ввода.  
2. Ввести символ через 100 мс  
   **Ожидаемый результат:** Следующий запрос задерживается до 300 мс от последнего ввода.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-16: Ленивая подгрузка  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Прокрутить до конца  
   **Ожидаемый результат:** Появляются новые элементы.  
2. Прокрутить снова  
   **Ожидаемый результат:** Добавляются элементы без дублирования.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-17: Защита от XSS  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести `<script>alert(1)</script>`  
   **Ожидаемый результат:** Тег отображается как текст, скрипт не выполняется.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-18: Защита от SQL-инъекции  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Ввести `100'; DROP TABLE users;--`  
   **Ожидаемый результат:** Появляется сообщение об ошибке, БД не затронута.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-19: История последних выборов  
**Предусловие:**  
- Dropdown открыт.

**Шаги и ожидаемые результаты:**  
1. Последовательно выбрать 5 разных стран  
   **Ожидаемый результат:** Вверху списка отображается секция с этими странами.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-20: Событие аналитики  
**Предусловие:**  
- Инструмент аналитики активирован.

**Шаги и ожидаемые результаты:**  
1. Выбрать страну  
   **Ожидаемый результат:** В логах появляется событие `country_selected` с корректным кодом.  
2. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.

---

## TC-21: WebSocket-обновление  
**Предусловие:**  
- Dropdown открыт, WebSocket подключён.

**Шаги и ожидаемые результаты:**  
1. Эмулировать добавление страны (например, Narnia +999)  
   **Ожидаемый результат:** Новая страна появляется в списке.  
2. Выбрать эту страну  
   **Ожидаемый результат:** В поле отображаются Narnia +999.  
3. Закрыть dropdown  
   **Ожидаемый результат:** Dropdown закрыт.
